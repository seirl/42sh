#!/bin/sh

CFLAGS="-std=c99 -Wall -Werror -Wextra -pedantic"

usage() {
    cat << EOF
$0
    --with-debug    Add debug flags
    --help          Display this message
EOF
}

for arg in "$@"
do
    case "$arg" in
        --with-debug)
            CFLAGS=${CFLAGS}" -g3 -gdwarf-2"
            ;;
        --help)
            usage
            ;;
    esac
done

echo "set(CMAKE_C_FLAGS \"$CFLAGS\")" > common.cmake
